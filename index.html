<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Twitter Like App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <h1>ğŸ  ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</h1>
  <textarea id="text" maxlength="140" placeholder="ä½•ã‹ã¤ã¶ã‚„ã„ã¦ã¿ã‚ƒã€œï¼Ÿ"></textarea>
<br>
<button id="postBtn">æŠ•ç¨¿</button>

  <div id="timeline"></div>

<script>
  const API_URL = 'https://ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå.vercel.app/api/post';

  function loadTimeline() {
    fetch(`${API_URL}/list`)
      .then(res => res.json())
      .then(posts => {
        const tl = document.getElementById('timeline');
        tl.innerHTML = '';
        posts.forEach(p => {
          const div = document.createElement('div');
          div.innerHTML = `
            <hr>
            <p>${p.text}</p>
            <small>${p.created_at}</small>
          `;
          tl.appendChild(div);
        });
      });
  }

  document.getElementById('postBtn').onclick = () => {
    const text = document.getElementById('text').value;

    fetch(`${API_URL}/create`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        user_id: 'test-user-id',
        text: text,
        image_urls: []
      })
    }).then(() => {
      document.getElementById('text').value = '';
      loadTimeline();
    });
  };

  loadTimeline();
</script>
</body>
</html>
